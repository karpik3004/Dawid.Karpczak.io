<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=iso-8859-2"/>
    <title>Wyszukiwanie książek</title>
    <script type="text/javascript">
        var ksiazka;
        function zaladujPlik() {
            xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", "spis.xml", true);
            xmlhttp.send();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var xmlDoc = xmlhttp.responseXML;
                    ksiazka = xmlDoc.getElementsByTagName("KSIAZKA");                    
                }
            }            
        }


        function SzukajKsiazki() {
            LancuchSzukany = TekstWyszukiwany.value.toUpperCase();            
            if (LancuchSzukany == "") {
                DIVWynikowy.innerHTML = "&ltNależy wprowadzić tekst "
                                + "do pola 'Tekst tytułu'.&gt";
                return;
            }
            
            WynikHTML = "";
            for (var i=0; i<ksiazka.length; i++) {
                LancuchTytulu = ksiazka[i].getElementsByTagName("TYTUL")[0].childNodes[0].nodeValue;
                
                if (LancuchTytulu.toUpperCase().indexOf(LancuchSzukany) >= 0)
                    WynikHTML += "<I>"
                           + ksiazka[i].getElementsByTagName("TYTUL")[0].childNodes[0].nodeValue
                           + "</I>, "
                        + "<B>"
                        + ksiazka[i].getElementsByTagName("AUTOR")[0].textContent
                           + "</B>, "
                        + ksiazka[i].getElementsByTagName("OPRAWA")[0].textContent
                           + ", "
                           + ksiazka[i].getElementsByTagName("STRONY")[0].childNodes[0].nodeValue
                           + " pages, "
                           + ksiazka[i].getElementsByTagName("CENA")[0].childNodes[0].nodeValue
                           + "<P>";               
            }

            if (WynikHTML == "")
                DIVWynikowy.innerHTML = "&ltnie znaleziono książek&gt";
            else
                DIVWynikowy.innerHTML = WynikHTML;
        }
    </script>
</head>
<body onload="zaladujPlik()">    
    <h2>
        Znajdź książkę</h2>
    <span>Tekst tytułu:</span>
    
    <input type="text" id="TekstWyszukiwany"/>&nbsp
    <input type="button" onclick='SzukajKsiazki()' value="szukaj"/>
        
    
    <hr/>
    Wyniki:
        <div id="DIVWynikowy">
        </div>
</body>
</html>
